{% extends "base.html" %}
{% load static %}
{% block titulo %} Gesti칩n de Proyectos {% endblock %}
{% block css %}
<link href="{% static 'css/reportes.css' %}" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
{% endblock %}
{% block contenido %} {% endblock %}
{% block main %}

<div class="contenedor-principal">
    <div class="titulo">
        <h3>游늶 Centro de Reportes</h3>
        <p>Genera reportes detallados de los semilleros de investigaci칩n, incluyendo sus proyectos, entregables y miembros vinculados.</p>
    </div>

    <!-- REPORTES R츼PIDOS -->
    <div class="reporte-rapido">
        <div class="title">
            <img src="{% static 'img/rayo.png' %}" alt="Icono de rayo" />
            <h4>Reportes R치pidos</h4>
        </div>

        <div class="info">
            <div class="reporte-card">
                <div class="icon-container icon-file">
                    <img src="{% static 'img/Report.png' %}" alt="Icono de reporte" />
                </div>
                <h3>Resumen General</h3>
                <p>Todos los semilleros</p>
            </div>

            <div class="reporte-card">
                <div class="icon-container icon-rocket">
                    <img src="{% static 'img/Rocket.png' %}" alt="Icono de cohete" />
                </div>
                <h3>Proyectos Activos</h3>
                <p>En Desarrollo</p>
            </div>

            <div class="reporte-card">
                <div class="icon-container icon-users">
                    <img src="{% static 'img/people.png' %}" alt="Icono de personas"/>
                </div>
                <h3>Participantes</h3>
                <p>칔ltimo mes</p>
            </div>

            <div class="reporte-card">
                <div class="icon-container icon-trophy">
                    <img src="{% static 'img/Trophy.png' %}" alt="Icono de trofeo" />
                </div>
                <h3>Entregables</h3>
                <p>칔ltimo mes</p>
            </div>
        </div>
    </div>

    <!-- GENERADOR DE REPORTES PERSONALIZADOS -->
    <div class="seccion-busqueda">
        <div class="titulo2">
            <h3>游꿛 Constructor de Reportes Personalizados</h3>
        </div>
        
        <!-- Selector de Categor칤as -->
        <div class="contenedor-categorias">
            <div class="categoria-selector">
                <label>
                    <input type="checkbox" name="categoria" value="semilleros">
                    <span class="categoria-badge semilleros-badge">
                        <i class="fas fa-microscope"></i> Semilleros
                    </span>
                </label>
            </div>
            
            <div class="categoria-selector">
                <label>
                    <input type="checkbox" name="categoria" value="proyectos">
                    <span class="categoria-badge proyectos-badge">
                        <i class="fas fa-rocket"></i> Proyectos
                    </span>
                </label>
            </div>
            
            <div class="categoria-selector">
                <label>
                    <input type="checkbox" name="categoria" value="miembros">
                    <span class="categoria-badge miembros-badge">
                        <i class="fas fa-users"></i> Miembros
                    </span>
                </label>
            </div>
            
            <div class="categoria-selector">
                <label>
                    <input type="checkbox" name="categoria" value="entregables">
                    <span class="categoria-badge entregables-badge">
                        <i class="fas fa-file-alt"></i> Entregables
                    </span>
                </label>
            </div>
        </div>

        <!-- Campos Din치micos (se mostrar치n seg칰n las categor칤as seleccionadas) -->
        <div id="campos-dinamicos" class="campos-dinamicos">
            <p class="info-texto">
                <i class="fas fa-info-circle"></i> 
                Selecciona las categor칤as para ver los campos disponibles
            </p>
        </div>

        <!-- Opciones de Formato -->
        <div class="formato-reporte">
            <p>Formato de Exportaci칩n</p>
            <div class="formato-opciones">
                <label class="formato-radio">
                    <input type="radio" name="formato" value="excel" checked>
                    <span><i class="fas fa-file-excel"></i> Excel</span>
                </label>
                <label class="formato-radio">
                    <input type="radio" name="formato" value="pdf">
                    <span><i class="fas fa-file-pdf"></i> PDF</span>
                </label>
                <label class="formato-radio">
                    <input type="radio" name="formato" value="csv">
                    <span><i class="fas fa-file-csv"></i> CSV</span>
                </label>
            </div>
        </div>

        <!-- Guardar Plantilla -->
        <div class="guardar-plantilla">
            <input type="text" placeholder="Nombre de la plantilla (opcional)" class="input-plantilla">
            <button class="btn-guardar-plantilla">
                <i class="fas fa-save"></i> Guardar como Plantilla
            </button>
        </div>

        <div class="botones-item">
            <button type="button" class="limpiar">
                <i class="fas fa-sync-alt"></i>Limpiar                
            </button>
            <button type="button" class="vista-previa">
                <i class="fas fa-eye"></i>Vista Previa
            </button>
            <button type="submit" class="filtrar">
                <i class="fas fa-download"></i>Generar Reporte
            </button>
        </div>
    </div>

    <!-- REPORTES POR CATEGOR칈A -->
    <div class="resumen">
        
        <!-- SEMILLEROS -->
        <div class="grupo">
            <div class="card semilleros">
                <div class="icon-cont">
                    <img class="icon" src="{% static 'img/microscopio.png' %}" alt="Icono Semilleros">
                </div>
                <div class="card-body">
                    <h5 class="card-title">Semilleros</h5>
                </div>
            </div>
            <div class="scrollable-list">
                <ul class="lista">
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Listado General de Semilleros</span><br>
                            <span class="subtitulo">Informaci칩n completa de todos los semilleros: nombre, l칤der, integrantes, fecha de creaci칩n, estado</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                    
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Semilleros por Estado</span><br>
                            <span class="subtitulo">Clasificaci칩n de semilleros seg칰n su estado actual: activos, inactivos, en proceso</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                    
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Participaci칩n por Semillero</span><br>
                            <span class="subtitulo">N칰mero de integrantes, instructores e investigadores por cada semillero</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- PROYECTOS -->
        <div class="grupo">
            <div class="card proyectos">
                <div class="icon-cont">
                    <img class="icon" src="{% static 'img/Rocket.png' %}" alt="Icono Proyectos">
                </div>
                <div class="card-body">
                    <h5 class="card-title">Proyectos</h5>
                </div>
            </div>
            <div class="scrollable-list">
                <ul class="lista">
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Proyectos SENNOVA</span><br>
                            <span class="subtitulo">Detalle de proyectos de investigaci칩n SENNOVA: t칤tulo, l칤neas, objetivos, entregables y avances</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                    
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Proyectos Capacidad Instalada</span><br>
                            <span class="subtitulo">Detalle de proyectos CI: t칤tulo, l칤neas, objetivos, entregables y avances</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                    
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Proyectos Formativos</span><br>
                            <span class="subtitulo">Detalle de proyectos formativos: t칤tulo, l칤neas, objetivos, ficha, programa y avances</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Estado de Avance de Proyectos</span><br>
                            <span class="subtitulo">Porcentaje de avance, hitos cumplidos, entregables vs realidad</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Proyectos por L칤nea de Investigaci칩n</span><br>
                            <span class="subtitulo">Agrupaci칩n y distribuci칩n de proyectos por l칤neas tem치ticas de investigaci칩n</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Alertas y Vencimientos</span><br>
                            <span class="subtitulo">Entregables pr칩ximos a vencer, proyectos atrasados y fechas cr칤ticas</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- MIEMBROS -->
        <div class="grupo">
            <div class="card participantes">
                <div class="icon-cont">
                    <i class="fas fa-users" id="icon"></i>
                </div>
                <div class="card-body">
                    <h5 class="card-title">Miembros</h5>
                </div>
            </div>
            <div class="scrollable-list">
                <ul class="lista">
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Instructores Participantes</span><br>
                            <span class="subtitulo">Listado de instructores vinculados: datos personales, participaci칩n en proyectos</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                    
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Aprendices por Semillero</span><br>
                            <span class="subtitulo">Aprendices participantes: programa, ficha, fecha de vinculaci칩n</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                    
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Participaci칩n por Rol</span><br>
                            <span class="subtitulo">Distribuci칩n de roles: l칤deres, participantes, estudiantes</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Carga de Trabajo por Instructor</span><br>
                            <span class="subtitulo">N칰mero de proyectos y semilleros asignados a cada instructor</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Historial de Participaci칩n</span><br>
                            <span class="subtitulo">Trayectoria completa de aprendices e instructores a trav칠s del tiempo</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Rotaci칩n de Miembros</span><br>
                            <span class="subtitulo">An치lisis de ingresos, retiros y permanencia promedio de miembros</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- ENTREGABLES -->
        <div class="grupo">
            <div class="card entregables">
                <div class="icon-cont">
                    <img class="icon" src="{% static 'img/Papers.png' %}" alt="Icono Entregables">
                </div>
                <div class="card-body">
                    <h5 class="card-title">Entregables</h5>
                </div>
            </div>
            <div class="scrollable-list">
                <ul class="lista">
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Listado General de Entregables</span><br>
                            <span class="subtitulo">Cat치logo completo: nombre, descripci칩n, proyecto, fecha de entrega, estado</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                    
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Entregables por Proyecto</span><br>
                            <span class="subtitulo">Agrupaci칩n de entregables organizados por proyecto</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                    
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Documentos por Entregable</span><br>
                            <span class="subtitulo">Inventario detallado: tipo, formato, versi칩n, autores</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Estado de Entregables</span><br>
                            <span class="subtitulo">Seguimiento: pendientes, en progreso, completados, revisi칩n, aprobados</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- ANAL칈TICA Y TENDENCIAS -->
        <div class="grupo">
            <div class="card analitica">
                <div class="icon-cont">
                    <img class="icon" src="{% static 'img/Report.png' %}" alt="Icono Anal칤tica">
                </div>
                <div class="card-body">
                    <h5 class="card-title">Anal칤tica</h5>
                </div>
            </div>
            <div class="scrollable-list">
                <ul class="lista">
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Tendencias de Crecimiento</span><br>
                            <span class="subtitulo">Evoluci칩n temporal de semilleros, proyectos y participantes con gr치ficos</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Productividad por Semillero</span><br>
                            <span class="subtitulo">Comparativa de entregables completados y proyectos finalizados por semillero</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- REPORTES TEMPORALES -->
        <div class="grupo">
            <div class="card temporales">
                <div class="icon-cont">
                    <img class="icon" src="{% static 'img/Trophy.png' %}" alt="Icono Temporal">
                </div>
                <div class="card-body">
                    <h5 class="card-title">Reportes Temporales</h5>
                </div>
            </div>
            <div class="scrollable-list">
                <ul class="lista">
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Reporte Mensual Ejecutivo</span><br>
                            <span class="subtitulo">Resumen consolidado del mes: logros, avances y estad칤sticas clave</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Informe Trimestral</span><br>
                            <span class="subtitulo">An치lisis de cumplimiento y resultados por trimestre</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Balance Anual</span><br>
                            <span class="subtitulo">Resultados del a침o completo con an치lisis integral</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Comparativo A침o vs A침o</span><br>
                            <span class="subtitulo">Evoluci칩n interanual de indicadores clave de desempe침o</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- FORMACI칍N ACAD칄MICA -->
        <div class="grupo">
            <div class="card academico">
                <div class="icon-cont">
                    <img class="icon" src="{% static 'img/student.png' %}" alt="Icono Acad칠mico">
                </div>
                <div class="card-body">
                    <h5 class="card-title">Formaci칩n</h5>
                </div>
            </div>
            <div class="scrollable-list">
                <ul class="lista">
                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Proyectos Formativos por Programa</span><br>
                            <span class="subtitulo">Agrupaci칩n de proyectos formativos seg칰n programa de formaci칩n</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>

                    <li>
                        <div class="texto-lista">
                            <span class="titulo">Vinculaci칩n de Fichas</span><br>
                            <span class="subtitulo">Fichas participantes y sus proyectos de investigaci칩n asociados</span>
                        </div>
                        <div class="boton-excel">
                            <i class="fa fa-download"></i>
                            <span>Excel</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script>
// Script para campos din치micos del constructor de reportes
document.addEventListener('DOMContentLoaded', function() {
    const checkboxes = document.querySelectorAll('input[name="categoria"]');
    const camposDinamicos = document.getElementById('campos-dinamicos');
    
    const camposPorCategoria = {
        semilleros: [
            'Nombre del Semillero',
            'L칤der',
            'Fecha de Creaci칩n',
            'Estado',
            'N칰mero de Integrantes',
            'L칤neas de Investigaci칩n'
        ],
        proyectos: [
            'T칤tulo del Proyecto',
            'Tipo de Proyecto',
            'Estado',
            'Fecha de Inicio',
            'Fecha de Finalizaci칩n',
            'Porcentaje de Avance',
            'Presupuesto'
        ],
        miembros: [
            'Nombre Completo',
            'Tipo de Documento',
            'Documento',
            'Rol',
            'Fecha de Vinculaci칩n',
            'Email',
            'Tel칠fono'
        ],
        entregables: [
            'Nombre del Entregable',
            'Tipo',
            'Estado',
            'Fecha de Entrega',
            'Proyecto Asociado',
            'Responsable'
        ]
    };
    
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', actualizarCampos);
    });
    
    function actualizarCampos() {
        const categoriasSeleccionadas = Array.from(checkboxes)
            .filter(cb => cb.checked)
            .map(cb => cb.value);
        
        if (categoriasSeleccionadas.length === 0) {
            camposDinamicos.innerHTML = `
                <p class="info-texto">
                    <i class="fas fa-info-circle"></i> 
                    Selecciona las categor칤as para ver los campos disponibles
                </p>
            `;
            return;
        }
        
        let html = '<div class="campos-grid">';
        
        categoriasSeleccionadas.forEach(categoria => {
            html += `<div class="categoria-campos">
                <h4 class="categoria-titulo">${categoria.charAt(0).toUpperCase() + categoria.slice(1)}</h4>
                <div class="campos-lista">`;
            
            camposPorCategoria[categoria].forEach(campo => {
                html += `
                    <label class="campo-check">
                        <input type="checkbox" name="campo_${categoria}" value="${campo}">
                        <span>${campo}</span>
                    </label>
                `;
            });
            
            html += '</div></div>';
        });
        
        html += '</div>';
        camposDinamicos.innerHTML = html;
    }
});
</script>
{% endblock %}